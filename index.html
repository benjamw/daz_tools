<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title>Daz Tools</title>

  <!-- Bootstrap: Latest compiled and minified CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/darkly/bootstrap.min.css" rel="stylesheet" integrity="sha384-S7YMK1xjUjSpEnF4P8hPUcgjXYLZKK3fQW1j5ObLSl787II9p8RO9XUGehRmKsxd" crossorigin="anonymous">
  <style type="text/css">
    body {
        padding: 70px 2em 2em;
    }

    .container-fluid textarea {
        height: 150px;
    }

    .btn {
        margin-right: 1ex;
    }
  </style>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <!-- moment.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

</head>
<body>
<div class="container-fluid">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <a class="navbar-brand">Daz Tools</a>
        <a href="https://github.com/benjamw/daz_tools/wiki/Help"><button type="button" class="btn btn-link navbar-btn" title="Help"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span></button></a>
        <a class="navbar-text navbar-right" href="https://github.com/benjamw/daz_tools/issues">Found a bug? &nbsp; Request a feature?</a>
    </div>
  </nav>

  <div class="row">

    <div class="col-md-6">
      <h2>Dates</h2>

      <section id="dates" class="well">
        <div class="form-inline">
          <div class="form-group">
            <label for="days">Days added:</label>
            <input type="number" value="14" id="days" min="0" max="366" class="form-control" />
            <select id="days_select" class="form-control">
              <option>7</option>
              <option selected="selected">14</option>
              <option>30</option>
              <option>60</option>

              <optgroup label="-----"></optgroup>

              <option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option>
              <option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option>
              <option>20</option><option>21</option><option>22</option><option>23</option><option>24</option><option>25</option><option>26</option><option>27</option><option>28</option><option>29</option>
              <option>30</option><option>31</option><option>32</option><option>33</option><option>34</option><option>35</option><option>36</option><option>37</option><option>38</option><option>39</option>
              <option>40</option><option>41</option><option>42</option><option>43</option><option>44</option><option>45</option><option>46</option><option>47</option><option>48</option><option>49</option>
              <option>50</option><option>51</option><option>52</option><option>53</option><option>54</option><option>55</option><option>56</option><option>57</option><option>58</option><option>59</option>
              <option>60</option><option>61</option><option>62</option><option>63</option><option>64</option><option>65</option><option>66</option><option>67</option><option>68</option><option>69</option>
              <option>70</option><option>71</option><option>72</option><option>73</option><option>74</option><option>75</option><option>76</option><option>77</option><option>78</option><option>79</option>
              <option>80</option><option>81</option><option>82</option><option>83</option><option>84</option><option>85</option><option>86</option><option>87</option><option>88</option><option>89</option>
              <option>90</option><option>91</option><option>92</option><option>93</option><option>94</option><option>95</option><option>96</option><option>97</option><option>98</option><option>99</option>
              <option>100</option><option>101</option><option>102</option><option>103</option><option>104</option><option>105</option><option>106</option><option>107</option><option>108</option><option>109</option>
              <option>110</option><option>111</option><option>112</option><option>113</option><option>114</option><option>115</option><option>116</option><option>117</option><option>118</option><option>119</option>
              <option>120</option><option>121</option><option>122</option><option>123</option><option>124</option><option>125</option><option>126</option><option>127</option><option>128</option><option>129</option>
              <option>130</option><option>131</option><option>132</option><option>133</option><option>134</option><option>135</option><option>136</option><option>137</option><option>138</option><option>139</option>
              <option>140</option><option>141</option><option>142</option><option>143</option><option>144</option><option>145</option><option>146</option><option>147</option><option>148</option><option>149</option>
              <option>150</option><option>151</option><option>152</option><option>153</option><option>154</option><option>155</option><option>156</option><option>157</option><option>158</option><option>159</option>
              <option>160</option><option>161</option><option>162</option><option>163</option><option>164</option><option>165</option><option>166</option><option>167</option><option>168</option><option>169</option>
              <option>170</option><option>171</option><option>172</option><option>173</option><option>174</option><option>175</option><option>176</option><option>177</option><option>178</option><option>179</option>
              <option>180</option><option>181</option><option>182</option><option>183</option><option>184</option><option>185</option><option>186</option><option>187</option><option>188</option><option>189</option>
              <option>190</option><option>191</option><option>192</option><option>193</option><option>194</option><option>195</option><option>196</option><option>197</option><option>198</option><option>199</option>
              <option>200</option><option>201</option><option>202</option><option>203</option><option>204</option><option>205</option><option>206</option><option>207</option><option>208</option><option>209</option>
              <option>210</option><option>211</option><option>212</option><option>213</option><option>214</option><option>215</option><option>216</option><option>217</option><option>218</option><option>219</option>
              <option>220</option><option>221</option><option>222</option><option>223</option><option>224</option><option>225</option><option>226</option><option>227</option><option>228</option><option>229</option>
              <option>230</option><option>231</option><option>232</option><option>233</option><option>234</option><option>235</option><option>236</option><option>237</option><option>238</option><option>239</option>
              <option>240</option><option>241</option><option>242</option><option>243</option><option>244</option><option>245</option><option>246</option><option>247</option><option>248</option><option>249</option>
              <option>250</option><option>251</option><option>252</option><option>253</option><option>254</option><option>255</option><option>256</option><option>257</option><option>258</option><option>259</option>
              <option>260</option><option>261</option><option>262</option><option>263</option><option>264</option><option>265</option><option>266</option><option>267</option><option>268</option><option>269</option>
              <option>270</option><option>271</option><option>272</option><option>273</option><option>274</option><option>275</option><option>276</option><option>277</option><option>278</option><option>279</option>
              <option>280</option><option>281</option><option>282</option><option>283</option><option>284</option><option>285</option><option>286</option><option>287</option><option>288</option><option>289</option>
              <option>290</option><option>291</option><option>292</option><option>293</option><option>294</option><option>295</option><option>296</option><option>297</option><option>298</option><option>299</option>
              <option>300</option><option>301</option><option>302</option><option>303</option><option>304</option><option>305</option><option>306</option><option>307</option><option>308</option><option>309</option>
              <option>310</option><option>311</option><option>312</option><option>313</option><option>314</option><option>315</option><option>316</option><option>317</option><option>318</option><option>319</option>
              <option>320</option><option>321</option><option>322</option><option>323</option><option>324</option><option>325</option><option>326</option><option>327</option><option>328</option><option>329</option>
              <option>330</option><option>331</option><option>332</option><option>333</option><option>334</option><option>335</option><option>336</option><option>337</option><option>338</option><option>339</option>
              <option>340</option><option>341</option><option>342</option><option>343</option><option>344</option><option>345</option><option>346</option><option>347</option><option>348</option><option>349</option>
              <option>350</option><option>351</option><option>352</option><option>353</option><option>354</option><option>355</option><option>356</option><option>357</option><option>358</option><option>359</option>
              <option>360</option><option>361</option><option>362</option><option>363</option><option>364</option><option>365</option><option>366</option>
            </select>
          </div>
          <div class="form-group">
            <label for="date">&nbsp; to Date:</label>
            <input type="date" value="1970-01-01" id="date" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label for="date_result">Result:</label>
          <textarea id="date_result" class="form-control"></textarea>
        </div>
      </section>

      <h2>HTML</h2>

      <section id="html" class="well">
        <div class="form-group">
          <label for="html_input">HTML Input:</label>
          <textarea id="html_input" class="form-control"></textarea>
          <button id="copy_html" class="btn btn-sm btn-info copy">Copy</button>
          <button id="select_html" class="btn btn-sm btn-warning">Select All</button>
          <button id="open_html" class="btn btn-sm btn-success">Open HTML</button>
        </div>
      </section>
    </div>

    <div class="col-md-6">
      <h2>Lists</h2>

      <section id="lists" class="well">
        <div class="row">
          <div class="form-group col-md-6">
            <label for="list_in" class="form-inline">Input:
              <select id="list_type" class="form-control input-sm">
                <option value="auto">Auto</option>
                <option value="digits">Use Numbers</option>
                <option value="chars">Use Words</option>
              </select>
              <span id="use" class="text-danger"></span>
            </label>
            <textarea id="list_in" class="form-control"></textarea>
            <button id="open_admin" class="btn btn-sm btn-success">Open in Admin</button>
            <button id="open_store" class="btn btn-sm btn-success">Open in Store</button>
            <button id="open_readme" class="btn btn-sm btn-success">Open in ReadMe</button>
          </div>
          <div class="form-group col-md-6">
            <label for="list_nl">Newlines:</label>
            <textarea id="list_nl" class="form-control"></textarea>
            <button id="copy_nl" class="btn btn-sm btn-info copy">Copy</button>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label for="list_csv">CSV:</label>
            <textarea id="list_csv" class="form-control"></textarea>
            <button id="copy_csv" class="btn btn-sm btn-info copy">Copy</button>
          </div>
          <div class="form-group col-md-6">
            <label for="list_csvs">CSV Spaced:</label>
            <textarea id="list_csvs" class="form-control"></textarea>
            <button id="copy_csvs" class="btn btn-sm btn-info copy">Copy</button>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6">
            <label for="list_sp">Spaces:</label>
            <textarea id="list_sp" class="form-control"></textarea>
            <button id="copy_sp" class="btn btn-sm btn-info copy">Copy</button>
          </div>
        </div>
      </section>
    </div>

  </div>

  <script type="text/javascript">
    /*

        This was all quick and dirty and serves a singular purpose
        Don't give me any shit for it.

    */

    var lists; // yes... that's a global... I don't care
    var counter = 0;

    // yes, this is a prototype modification... again, I don't care
    // I actually think this type of prototype overloading is perfectly fine
    Array.prototype.clean = function(deleteValue) {
        for (var i = 0; i < this.length; i += 1) {
            if (this[i] == deleteValue) {
                this.splice(i, 1);
                i -= 1;
            }
        }

        return this;
    };

    function convert_csv(input, list_type) {
        var type;

        // check the input and see what it consists of
        var chars = input.replace(/[^a-z]+/gi, '').length;
        var digits = input.replace(/[^0-9]+/g, '').length;

        if (('digits' === list_type) || (('auto' === list_type) && (chars < digits))) {
            type = 'digits';

            // split input into it's various IDs
            // yes, this is a global var, leave me alone
            lists = input.split(/[^0-9]+/).clean('');
        }
        else {
            type = 'chars';

            // split input into it's various words
            // yes, this is a global var, leave me alone
            lists = input.split(/[^a-z0-9 _-]+/i).clean('');

            // trim each item in the list
            lists = $.each(lists, $.trim);
        }

        var nl = lists.join('\n');
        var csv = lists.join(',');
        var csvs = lists.join(', ');
        var sp = lists.join(' ');

        return {
            'type': type,
            'nl': nl,
            'csv': csv,
            'csvs': csvs,
            'sp': sp
        };
    }

    function convert_date(input, days) {
        days = parseInt(days, 10);

        var date = moment(input);

        date.add(days, 'days');

        return [
            date.format('MM/DD/YYYY'), //
            date.format('YYYY-MM-DD'), //
            date.format('dddd, MMMM Do, YYYY'), //
            date.format('MMMM Do, YYYY'), //
            date.format('X') // UNIX Timestamp
        ];
    }

    function do_date( ) {
        var date = $('#date').val( );
        var days = $('#days').val( );

        var output = convert_date(date, days);

        $('#date_result').val(output.join('\n'));
    }

    $("#date").val(moment().format("YYYY-MM-DD"));

    do_date( );

    function do_lists( ) {
        var idx;
        var input = $('#list_in').val( );
        var output = convert_csv(input, $('#list_type').val( ));
        var type = (('digits' === output.type) ? 'Numbers' : 'Words');

        $('#use').text('Using '+ type);
        $('#open_admin').prop('disabled', ('digits' !== output.type));
        $('#open_store').prop('disabled', ('digits' !== output.type));
        $('#open_readme').prop('disabled', ('digits' !== output.type));

        for (idx in output) {
            if (output.hasOwnProperty(idx)) {
                if ('type' === idx) {
                    continue;
                }

                $('#list_'+idx).val(output[idx]);
            }
        }
    }

    $('#days').on('change', do_date);
    $('#date').on('change', do_date);

    $('#days_select').on('change', function(evt) {
        $('#days').val($(this).val( )).change( );
    });

    $('#list_in').on('keyup', do_lists);
    $('#list_type').on('change', do_lists);

    $('button.copy').on('click', function(evt) {
        var $text = $(this).siblings('textarea');
        var $span = $text.siblings('span');

        $text.select( );
        document.execCommand('copy');

        $span.text('Copied!').fadeOut(5000, function( ) {
            $span.text('').show( );
        });
    });

    $('#open_admin').on('click', function( ) {
        var idx = 0;
        var len = lists.length;
        var url = 'https://direct.daz3d.com/index_redir.php/D4Z_adm1n/catalog_product/edit/id/';

        if ($(this).prop('disabled')) {
            return;
        }

        for (idx = 0; idx < len; idx += 1) {
            window.open(url + lists[idx] + '/', '_blank');
        }
    });

    $('#open_store').on('click', function( ) {
        var idx = 0;
        var len = lists.length;
        var url = 'http://www.daz3d.com/catalog/product/view/id/';

        if ($(this).prop('disabled')) {
            return;
        }

        for (idx = 0; idx < len; idx += 1) {
            window.open(url + lists[idx] + '/', '_blank');
        }
    });

    $('#open_readme').on('click', function( ) {
        var idx = 0;
        var len = lists.length;
        var url = 'http://docs.daz3d.com/doku.php/group/read_me/staging/%d/start';

        if ($(this).prop('disabled')) {
            return;
        }

        for (idx = 0; idx < len; idx += 1) {
            var thisUrl = url.replace(/%d/img, lists[idx]);
            window.open(thisUrl, '_blank');
        }
    });

    $('#select_html').on('click', function( ) {
        $('#html_input').select( );
    });

    $('#open_html').on('click', function( ) {
        var val = $('#html_input').val();
        var wndw = window.open();
        wndw.document.write(val);
    });
  </script>
</div>
</body>
</html>
